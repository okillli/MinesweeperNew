<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="LiMineZZsweeperIE - A modern minesweeper roguelike with quests and progression">
    <meta name="theme-color" content="#1a1a2e">

    <title>LiMineZZsweeperIE - Minesweeper Roguelike</title>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Container -->
    <div id="app">
        <!-- HUD (Top Bar) - aria-live for dynamic updates -->
        <div id="hud" class="hud hidden" role="status" aria-live="polite">
            <div class="hud-left">
                <div class="stat">
                    <span class="stat-label" id="hp-label">HP:</span>
                    <span id="hp-display" class="stat-value" aria-labelledby="hp-label">3</span>
                </div>
                <div class="stat">
                    <span class="stat-label" id="mana-label">Mana:</span>
                    <span id="mana-display" class="stat-value" aria-labelledby="mana-label">0/100</span>
                </div>
                <div class="stat">
                    <span class="stat-label" id="coins-label">Coins:</span>
                    <span id="coins-display" class="stat-value" aria-labelledby="coins-label">0</span>
                </div>
            </div>
            <div class="hud-right">
                <div class="stat">
                    <span class="stat-label" id="board-label">Board:</span>
                    <span id="board-display" class="stat-value" aria-labelledby="board-label">1/6</span>
                </div>
            </div>
        </div>

        <!-- Main Menu Screen -->
        <div id="menu-screen" class="screen active">
            <div class="screen-content">
                <h1 class="title">
                    <span class="logo-lizzie">li</span><span class="logo-mine">MINE</span><span class="logo-lizzie">zz</span><span class="logo-sweeper">SWEEPER</span><span class="logo-lizzie">ie</span>
                </h1>
                <p class="subtitle">A Minesweeper Roguelike</p>

                <div class="menu-buttons">
                    <button id="start-button" class="btn btn-primary">Start Run</button>
                    <button id="collection-button" class="btn btn-secondary">Collection</button>
                    <button id="settings-button" class="btn btn-secondary">Settings</button>
                </div>

                <div class="stats-preview">
                    <p>Gems: <span id="menu-gems">0</span></p>
                    <p>Runs: <span id="menu-runs">0</span></p>
                    <p>Wins: <span id="menu-wins">0</span></p>
                </div>
            </div>
        </div>

        <!-- Quest Selection Screen -->
        <div id="quest-screen" class="screen">
            <div class="screen-content">
                <h2>Choose Your Quest</h2>
                <div id="quest-list" class="quest-list">
                    <!-- Quests will be populated by JavaScript -->
                </div>
                <button id="quest-back-button" class="btn btn-secondary">Back</button>
            </div>
        </div>

        <!-- Character Selection Screen -->
        <div id="character-screen" class="screen">
            <div class="screen-content">
                <h2>Choose Your Character</h2>
                <div id="character-list" class="character-list">
                    <!-- Characters will be populated by JavaScript -->
                </div>
                <button id="character-back-button" class="btn btn-secondary">Back</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Screen reader instructions (visually hidden) -->
            <div id="game-instructions" class="sr-only">
                Minesweeper game board. Use arrow keys to move cursor.
                Press Space or Enter to reveal a cell. Press F to flag a cell.
                On touch devices: tap to reveal, long-press to flag.
            </div>

            <!-- Canvas for grid -->
            <canvas id="game-canvas"
                    role="application"
                    aria-label="Minesweeper game board"
                    aria-describedby="game-instructions"></canvas>

            <!-- Active Abilities Bar -->
            <div id="abilities-bar" class="abilities-bar hidden" role="toolbar" aria-label="Active abilities">
                <div id="ability-slots" class="ability-slots">
                    <!-- Ability buttons will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Shop Screen -->
        <div id="shop-screen" class="screen">
            <div class="screen-content">
                <h2>Shop</h2>
                <p class="shop-info">Choose your upgrades wisely!</p>
                <p class="shop-coins">Coins: <span id="shop-coins-display">0</span></p>

                <div id="shop-items" class="shop-items">
                    <!-- Shop items will be populated by JavaScript -->
                </div>

                <button id="shop-continue-button" class="btn btn-primary">Continue</button>
            </div>
        </div>

        <!-- Game Over Overlay (appears on top of game screen) -->
        <div id="gameover-overlay" class="gameover-overlay hidden"
             role="dialog"
             aria-modal="true"
             aria-labelledby="gameover-title"
             aria-describedby="gameover-message">
            <!-- Semi-transparent message box centered on screen -->
            <div class="gameover-message-box">
                <h2 id="gameover-title">Game Over</h2>
                <p id="gameover-message">You were defeated!</p>
                <p class="gameover-hint" aria-hidden="true">Scroll down for details â†“</p>
            </div>

            <!-- Spacer to push stats below the viewport -->
            <div class="gameover-spacer"></div>

            <!-- Stats Section (Below viewport - user scrolls to see) -->
            <div class="gameover-stats-container">
                <div class="stats-section">
                    <h2>Run Complete</h2>

                    <div class="stats-summary">
                        <h3>Run Statistics</h3>
                        <p>Boards Cleared: <span id="stat-boards">0</span></p>
                        <p>Cells Revealed: <span id="stat-cells">0</span></p>
                        <p>Coins Earned: <span id="stat-coins">0</span></p>
                        <p>Damage Taken: <span id="stat-damage">0</span></p>
                    </div>

                    <div class="rewards">
                        <h3>Rewards</h3>
                        <p class="gems-earned">+<span id="gems-earned">0</span> Gems</p>
                    </div>

                    <div class="gameover-actions">
                        <button id="gameover-newgame-button" class="btn btn-primary">New Game</button>
                        <button id="gameover-menu-button" class="btn btn-secondary">Return to Menu</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Collection Screen -->
        <div id="collection-screen" class="screen">
            <div class="screen-content">
                <h2>Collection</h2>

                <div class="collection-tabs" role="tablist" aria-label="Collection categories">
                    <button class="tab-button active" data-tab="items" role="tab" aria-selected="true" aria-controls="collection-content">Items</button>
                    <button class="tab-button" data-tab="characters" role="tab" aria-selected="false" aria-controls="collection-content">Characters</button>
                    <button class="tab-button" data-tab="achievements" role="tab" aria-selected="false" aria-controls="collection-content">Achievements</button>
                </div>

                <div id="collection-content" class="collection-content" role="tabpanel" aria-label="Collection items">
                    <!-- Collection items will be populated by JavaScript -->
                </div>

                <button id="collection-back-button" class="btn btn-secondary">Back</button>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="screen-content">
                <h2>Settings</h2>

                <div class="settings-list">
                    <div class="setting-item">
                        <label for="starting-hp">Starting HP</label>
                        <select id="starting-hp">
                            <option value="1" selected>1 HP (Hard)</option>
                            <option value="2">2 HP (Medium)</option>
                            <option value="3">3 HP (Normal)</option>
                            <option value="5">5 HP (Easy)</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="sound-toggle">Sound Effects</label>
                        <input type="checkbox" id="sound-toggle" checked>
                    </div>
                    <div class="setting-item">
                        <label for="music-toggle">Music</label>
                        <input type="checkbox" id="music-toggle" checked>
                    </div>
                    <div class="setting-item">
                        <button id="clear-save-button" class="btn btn-danger">Clear Save Data</button>
                    </div>
                </div>

                <button id="settings-back-button" class="btn btn-secondary">Back</button>
            </div>
        </div>
    </div>

    <!-- Load game scripts -->

    <!-- Data Definitions -->
    <script src="src/data/items.js"></script>
    <script src="src/data/boards.js"></script>

    <!-- Entities -->
    <script src="src/entities/Cell.js"></script>
    <script src="src/entities/Grid.js"></script>

    <!-- Systems -->
    <script src="src/systems/ItemSystem.js"></script>
    <script src="src/systems/ShopSystem.js"></script>

    <!-- Rendering -->
    <script src="src/rendering/CanvasRenderer.js"></script>

    <!-- Core -->
    <script src="src/core/EventBus.js"></script>
    <script src="src/core/GameState.js"></script>
    <script src="src/core/Game.js"></script>

    <!-- Main entry point -->
    <script src="src/main.js"></script>

    <!--
    Phase 2+ Files (not yet implemented):
    - src/data/constants.js, items.js, quests.js, characters.js
    - src/utils/random.js, storage.js, math.js, helpers.js
    - src/entities/Item.js, Character.js
    - src/systems/GridSystem.js, ShopSystem.js, ItemSystem.js, QuestSystem.js, ProgressionSystem.js, SaveSystem.js
    - src/rendering/UIRenderer.js, effects.js
    - src/core/StateMachine.js
    -->
</body>
</html>
